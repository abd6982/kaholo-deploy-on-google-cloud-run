{"content":"{\"cells\":[{\"type\":\"devs.PMStartPoint\",\"size\":{\"width\":40,\"height\":39},\"outPorts\":[\" \"],\"inPorts\":[],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\" \"}}}]},\"position\":{\"x\":50,\"y\":20},\"angle\":0,\"id\":\"5e2e1ba9-e811-42c5-92dd-3bcdc7128d13\",\"z\":1,\"attrs\":{\"rect\":{\"fill\":\"#2d3236\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":336,\"y\":-131},\"angle\":0,\"id\":\"b934a3ac-4b99-477a-bda0-74d4e6496b07\",\"z\":4,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Enable Cloud Run\"},\".p_id\":{\"text\":\"61f91dd74250e80034e2de16\"},\"image\":{\"xlink:href\":\"/plugins/GCP-Services/icon.png\",\"ref-y\":50},\"text\":{\"text\":\"Enable Cloud Run\"}}},{\"type\":\"link\",\"source\":{\"id\":\"5e2e1ba9-e811-42c5-92dd-3bcdc7128d13\",\"port\":\" \"},\"target\":{\"id\":\"f54a5152-2dd5-45a5-8b0b-c7079f5d8f03\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"63b54b47-56e5-4aa5-98eb-8828048590f8\",\"z\":5,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":993,\"y\":76},\"angle\":0,\"id\":\"fbc9215c-7527-48a4-8999-daff2fdcbf16\",\"z\":6,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Deploy Public Service\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Deploy Public Service\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":572,\"y\":76},\"angle\":0,\"id\":\"2d3b13a4-470e-4e7b-b966-8f244baeb9b9\",\"z\":8,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Authenticate GCloud\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Authenticate GCloud\"}}},{\"type\":\"link\",\"source\":{\"id\":\"b934a3ac-4b99-477a-bda0-74d4e6496b07\",\"port\":\"  \"},\"target\":{\"id\":\"fb2bf2f7-3994-41b9-a0bc-df069a570dcc\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"80319e99-2e14-402c-b0b5-70be901f79f5\",\"z\":9,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":997,\"y\":267},\"angle\":0,\"id\":\"0d7df3ea-f106-407f-aee5-df2e5132c7fc\",\"z\":11,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill\":\"#2d3236\",\"fill-opacity\":0.5},\".label\":{\"text\":\"Deploy Private Service\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Deploy Private Service\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":150,\"y\":71},\"angle\":0,\"id\":\"f54a5152-2dd5-45a5-8b0b-c7079f5d8f03\",\"z\":13,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Enable Cloud Build\"},\".p_id\":{\"text\":\"61f91dd74250e80034e2de16\"},\"image\":{\"xlink:href\":\"/plugins/GCP-Services/icon.png\",\"ref-y\":50},\"text\":{\"text\":\"Enable Cloud Build\"}}},{\"type\":\"link\",\"source\":{\"id\":\"f54a5152-2dd5-45a5-8b0b-c7079f5d8f03\",\"port\":\"  \"},\"target\":{\"id\":\"b934a3ac-4b99-477a-bda0-74d4e6496b07\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"1b6287e9-c3d3-4e4f-b0c5-3445d1b503a1\",\"z\":14,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":567,\"y\":-133},\"angle\":0,\"id\":\"fb2bf2f7-3994-41b9-a0bc-df069a570dcc\",\"z\":15,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Enable Artifact Registry\"},\".p_id\":{\"text\":\"61f91dd74250e80034e2de16\"},\"image\":{\"xlink:href\":\"/plugins/GCP-Services/icon.png\",\"ref-y\":50},\"text\":{\"text\":\"Enable Artifact Registry\"}}},{\"type\":\"link\",\"source\":{\"id\":\"fb2bf2f7-3994-41b9-a0bc-df069a570dcc\",\"port\":\"  \"},\"target\":{\"id\":\"2d3b13a4-470e-4e7b-b966-8f244baeb9b9\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"9e5d94a7-dc0a-4517-9a40-5c7c35e109fa\",\"z\":16,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":566,\"y\":265},\"angle\":0,\"id\":\"31bba741-93dd-47c8-aeeb-4c36851665dd\",\"z\":20,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Clone Private Service Repo\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Clone Private Service Repo\"}}},{\"type\":\"link\",\"source\":{\"id\":\"31bba741-93dd-47c8-aeeb-4c36851665dd\",\"port\":\"  \"},\"target\":{\"id\":\"0d7df3ea-f106-407f-aee5-df2e5132c7fc\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"08cf1f11-5e46-463f-9880-cf69e0266bb7\",\"z\":22,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"2d3b13a4-470e-4e7b-b966-8f244baeb9b9\",\"port\":\"  \"},\"target\":{\"id\":\"31bba741-93dd-47c8-aeeb-4c36851665dd\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"1de12882-6ca7-495b-8f1a-8a28208d7c37\",\"z\":23,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"2d3b13a4-470e-4e7b-b966-8f244baeb9b9\",\"port\":\"  \"},\"target\":{\"id\":\"fbc9215c-7527-48a4-8999-daff2fdcbf16\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"f76e64d3-a527-451e-936d-467added5373\",\"z\":24,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}}]}","code":"async function getSVCKey() {\r\n    kaholo.execution.configuration.svcAccKeyFile = await kaholo.vault.getValueByKey(kaholo.execution.configuration.serviceAccountVaultName)\r\n}\r\n\r\n// Reads service account key from Vault to make it available in the Pipeline.\r\ngetSVCKey()\r\n\r\n// Determines the Repo dir to delete before cloning again.\r\nkaholo.execution.configuration.privateServiceRepoCloneDir = kaholo.execution.configuration.privateServiceRepoURL.split('/').pop()\r\n","plugins":[],"processes":[{"id":"61ffb3aa4250e80034e595f4","uuid":"b934a3ac-4b99-477a-bda0-74d4e6496b07","codeId":"gcpservices1","name":"Enable Cloud Run","description":"Enable the Cloud Run API for deploying containers to Cloud Run.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Enable Cloud Run","mandatory":true,"method":"serviceEnable","params":[{"value":"GCP SVC Creds","code":null,"id":"61f91dd74250e80034e2de1b","_id":"61f91dd74250e80034e2de1b","viewName":"Credentials","name":"CREDENTIALS","required":false,"param":"61f91dd74250e80034e2de1b","type":"vault"},{"value":"cumulo","code":null,"id":"61f91dd74250e80034e2de1c","_id":"61f91dd74250e80034e2de1c","viewName":"Project ID","name":"PROJECTID","required":false,"param":"61f91dd74250e80034e2de1c","type":"string"},{"value":"run.googleapis.com","code":null,"id":"61f91dd74250e80034e2de1d","_id":"61f91dd74250e80034e2de1d","viewName":"Service","name":"SERVICE","required":false,"param":"61f91dd74250e80034e2de1d","type":"string"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"GCP-Services","version":"1.0.1"},"correlateAgents":null,"numProcessParallel":""},{"id":"61ffb3aa4250e80034e595f9","uuid":"fbc9215c-7527-48a4-8999-daff2fdcbf16","codeId":"commandline1","name":"Deploy Public Service","description":"Deploy the service from the specified public docker image.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Deploy Public Service","mandatory":true,"method":"execute","params":[{"value":null,"code":null,"id":"61f91da34250e80034e2db6f","_id":"61f91da34250e80034e2db6f","viewName":"Working Directory","name":"workingDir","required":false,"param":"61f91da34250e80034e2db6f","type":"string"},{"value":"`gcloud run deploy ${kaholo.execution.configuration.publicServiceName} --image=${kaholo.execution.configuration.publicServiceImage} --project=${kaholo.execution.configuration.project} --region=${kaholo.execution.configuration.region} --port=80 --cpu=1 --allow-unauthenticated`","code":true,"id":"61f91da34250e80034e2db70","_id":"61f91da34250e80034e2db70","viewName":"Command","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db70","type":"string"},{"value":true,"code":null,"id":"61f91da34250e80034e2db71","_id":"61f91da34250e80034e2db71","viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61f91da34250e80034e2db71","type":"boolean"},{"value":"/bin/bash","code":null,"id":"61f91da34250e80034e2db72","_id":"61f91da34250e80034e2db72","viewName":"Shell Type","name":"shell","required":false,"param":"61f91da34250e80034e2db72","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61ffb3aa4250e80034e595ff","uuid":"2d3b13a4-470e-4e7b-b966-8f244baeb9b9","codeId":"commandline2","name":"Authenticate GCloud","description":"Authenticate GCloud SDK using the provided Service Account Key file.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Authenticate GCloud","mandatory":true,"method":"execute","params":[{"value":"","code":null,"id":"61f91da34250e80034e2db6f","_id":"61f91da34250e80034e2db6f","viewName":"Working Directory","name":"workingDir","required":false,"param":"61f91da34250e80034e2db6f","type":"string"},{"value":"`echo '${kaholo.execution.configuration.svcAccKeyFile}' > /keyfile.json && gcloud auth activate-service-account --project=${kaholo.execution.configuration.project} --key-file=/keyfile.json`","code":true,"id":"61f91da34250e80034e2db70","_id":"61f91da34250e80034e2db70","viewName":"Command","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db70","type":"string"},{"value":true,"code":null,"id":"61f91da34250e80034e2db71","_id":"61f91da34250e80034e2db71","viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61f91da34250e80034e2db71","type":"boolean"},{"value":"/bin/bash","code":null,"id":"61f91da34250e80034e2db72","_id":"61f91da34250e80034e2db72","viewName":"Shell Type","name":"shell","required":false,"param":"61f91da34250e80034e2db72","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61ffb3aa4250e80034e59605","uuid":"0d7df3ea-f106-407f-aee5-df2e5132c7fc","codeId":"commandline3","name":"Deploy Private Service","description":"Deploy the service using the image built from the specified private service repo.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Deploy Private Service","mandatory":true,"method":"execute","params":[{"value":null,"code":null,"id":"61f91da34250e80034e2db6f","_id":"61f91da34250e80034e2db6f","viewName":"Working Directory","name":"workingDir","required":false,"param":"61f91da34250e80034e2db6f","type":"string"},{"value":"`gcloud run deploy ${kaholo.execution.configuration.privateServiceName} --project=${kaholo.execution.configuration.project} --region=${kaholo.execution.configuration.region} --source=${kaholo.execution.configuration.privateServiceSourceDir} --cpu=1 --allow-unauthenticated --quiet`","code":true,"id":"61f91da34250e80034e2db70","_id":"61f91da34250e80034e2db70","viewName":"Command","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db70","type":"string"},{"value":true,"code":null,"id":"61f91da34250e80034e2db71","_id":"61f91da34250e80034e2db71","viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61f91da34250e80034e2db71","type":"boolean"},{"value":"/bin/bash","code":null,"id":"61f91da34250e80034e2db72","_id":"61f91da34250e80034e2db72","viewName":"Shell Type","name":"shell","required":false,"param":"61f91da34250e80034e2db72","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61ffb3aa4250e80034e5960b","uuid":"f54a5152-2dd5-45a5-8b0b-c7079f5d8f03","codeId":"gcpservices2","name":"Enable Cloud Build","description":"Enable the Cloud Build API for building the docker image from the source code.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Enable Cloud Build","mandatory":true,"method":"serviceEnable","params":[{"value":"GCP SVC Creds","code":null,"id":"61f91dd74250e80034e2de1b","_id":"61f91dd74250e80034e2de1b","viewName":"Credentials","name":"CREDENTIALS","required":false,"param":"61f91dd74250e80034e2de1b","type":"vault"},{"value":"cumulo","code":null,"id":"61f91dd74250e80034e2de1c","_id":"61f91dd74250e80034e2de1c","viewName":"Project ID","name":"PROJECTID","required":false,"param":"61f91dd74250e80034e2de1c","type":"string"},{"value":"cloudbuild.googleapis.com","code":null,"id":"61f91dd74250e80034e2de1d","_id":"61f91dd74250e80034e2de1d","viewName":"Service","name":"SERVICE","required":false,"param":"61f91dd74250e80034e2de1d","type":"string"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"GCP-Services","version":"1.0.1"},"correlateAgents":null,"numProcessParallel":""},{"id":"61ffb3aa4250e80034e59610","uuid":"fb2bf2f7-3994-41b9-a0bc-df069a570dcc","codeId":"gcpservices3","name":"Enable Artifact Registry","description":"Enable the Artifact Registry API for pushing and pulling the containers built from source code.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Enable Artifact Registry","mandatory":true,"method":"serviceEnable","params":[{"value":"GCP SVC Creds","code":null,"id":"61f91dd74250e80034e2de1b","_id":"61f91dd74250e80034e2de1b","viewName":"Credentials","name":"CREDENTIALS","required":false,"param":"61f91dd74250e80034e2de1b","type":"vault"},{"value":"cumulo","code":null,"id":"61f91dd74250e80034e2de1c","_id":"61f91dd74250e80034e2de1c","viewName":"Project ID","name":"PROJECTID","required":false,"param":"61f91dd74250e80034e2de1c","type":"string"},{"value":"artifactregistry.googleapis.com","code":null,"id":"61f91dd74250e80034e2de1d","_id":"61f91dd74250e80034e2de1d","viewName":"Service","name":"SERVICE","required":false,"param":"61f91dd74250e80034e2de1d","type":"string"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"GCP-Services","version":"1.0.1"},"correlateAgents":null,"numProcessParallel":""},{"id":"61ffb3aa4250e80034e59615","uuid":"31bba741-93dd-47c8-aeeb-4c36851665dd","codeId":"commandline5","name":"Clone Private Service Repo","description":"Clone the specified repo.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Clone Private Service Repo","mandatory":true,"method":"execute","params":[{"value":null,"code":null,"id":"61f91da34250e80034e2db6f","_id":"61f91da34250e80034e2db6f","viewName":"Working Directory","name":"workingDir","required":false,"param":"61f91da34250e80034e2db6f","type":"string"},{"value":"`rm -rf ${kaholo.execution.configuration.privateServiceRepoCloneDir} && git clone ${kaholo.execution.configuration.privateServiceRepoURL}`","code":true,"id":"61f91da34250e80034e2db70","_id":"61f91da34250e80034e2db70","viewName":"Command","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db70","type":"string"},{"value":true,"code":null,"id":"61f91da34250e80034e2db71","_id":"61f91da34250e80034e2db71","viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61f91da34250e80034e2db71","type":"boolean"},{"value":"/bin/bash","code":null,"id":"61f91da34250e80034e2db72","_id":"61f91da34250e80034e2db72","viewName":"Shell Type","name":"shell","required":false,"param":"61f91da34250e80034e2db72","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""}],"configurations":[{"name":"production","value":"{\n    \"project\": \"sample-project\",\n    \"region\": \"us-east1\",\n    \"serviceAccountVaultName\": \"GCP SVC Creds\",\n    \"publicServiceName\": \"nginx-service\",\n    \"publicServiceImage\": \"gcr.io/google-containers/nginx\",\n    \"privateServiceName\": \"python-service\",\n    \"privateServiceRepoURL\": \"https://github.com/GoogleCloudPlatform/python-docs-samples\",\n    \"privateServiceSourceDir\": \"python-docs-samples/run/helloworld\"\n}","_id":"6203c5114250e80034e740a0"}],"links":[{"uuid":"63b54b47-56e5-4aa5-98eb-8828048590f8","sourceId":"5e2e1ba9-e811-42c5-92dd-3bcdc7128d13","targetId":"f54a5152-2dd5-45a5-8b0b-c7079f5d8f03"},{"uuid":"80319e99-2e14-402c-b0b5-70be901f79f5","sourceId":"b934a3ac-4b99-477a-bda0-74d4e6496b07","targetId":"fb2bf2f7-3994-41b9-a0bc-df069a570dcc"},{"uuid":"1b6287e9-c3d3-4e4f-b0c5-3445d1b503a1","sourceId":"f54a5152-2dd5-45a5-8b0b-c7079f5d8f03","targetId":"b934a3ac-4b99-477a-bda0-74d4e6496b07"},{"uuid":"9e5d94a7-dc0a-4517-9a40-5c7c35e109fa","sourceId":"fb2bf2f7-3994-41b9-a0bc-df069a570dcc","targetId":"2d3b13a4-470e-4e7b-b966-8f244baeb9b9"},{"uuid":"08cf1f11-5e46-463f-9880-cf69e0266bb7","sourceId":"31bba741-93dd-47c8-aeeb-4c36851665dd","targetId":"0d7df3ea-f106-407f-aee5-df2e5132c7fc"},{"uuid":"1de12882-6ca7-495b-8f1a-8a28208d7c37","sourceId":"2d3b13a4-470e-4e7b-b966-8f244baeb9b9","targetId":"31bba741-93dd-47c8-aeeb-4c36851665dd"},{"uuid":"f76e64d3-a527-451e-936d-467added5373","sourceId":"2d3b13a4-470e-4e7b-b966-8f244baeb9b9","targetId":"fbc9215c-7527-48a4-8999-daff2fdcbf16"}],"used_plugins":[{"name":"GCP-Services","version":"1.0.1"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"GCP-Services","version":"1.0.1"},{"name":"GCP-Services","version":"1.0.1"},{"name":"CommandLine","version":"3.0.2"}]}